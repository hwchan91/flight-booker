<h1>Search Flight</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(:flight, url: root_path, method: :get) do |f| %>
      <%= f.label :from_airport_id, "From Airport" %>
      <%= f.select(:from_airport_id, options_for_select(@airports), include_blank: true) %>

      <%= f.label :to_airport_id, "To Airport" %>
      <%= f.select(:to_airport_id, options_for_select(@airports), include_blank: true) %>

      <%= f.label :passengers, "No. of Passengers" %>
      <%= f.select(:passengers, (1..4).map{|i| [i.to_s, i]}, include_blank: true) %>

      <%= f.label :start_date, "Flight Date" %>
      <%= f.select(:start_date, options_for_select(@flight_dates), include_blank: true) %>

      <%= f.submit "Search", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<% if !@matching_flights.nil? %>
<h1> Choose a Flight</h1>
  <%= form_tag(new_booking_path, method: :get) do %>
    <table>
      <tr>
        <th></th>
        <th>Departing from</th>
        <th>Destination</th>
        <th>Time</th>
        <th>Date</th>
        <th>Duration</th>
      </tr>
      <%= render @matching_flights %>
    </table>
    <%= hidden_field_tag(:seats, @seats) %>
    <%= submit_tag "Book Now!", class: "btn btn-primary" %>
  <% end %>
<% end %>
